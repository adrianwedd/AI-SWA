version: '3'
services:
  orchestrator:
    build:
      context: .
      dockerfile: orchestrator/Dockerfile
    volumes:
      - ./tasks.yml:/app/tasks.yml
      - ./state.json:/app/state.json
    depends_on:
      - broker
      - worker
      - io-service
  broker:
    build:
      context: .
      dockerfile: broker/Dockerfile
    ports:
      - "8000:8000"
  worker:
    build:
      context: .
      dockerfile: worker/Dockerfile
  io-service:
    build:
      context: .
      dockerfile: services/node/Dockerfile
    ports:
      - "50051:50051"
      - "9100:9100"
